<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<div th:replace="cssYJs"></div>	
	<title>Wikidrinks - Tragos</title>
</head>
<body>
	<div th:replace="header"></div>
	<h2 class="col-xs-12" style="text-align: center;">TRAGOS</h2>
	<div class="panel panel-default col-xs-12" style="font-size: 20px">
		<div class="panel-body col-xs-12">
			<div class="col-xs-12 form-group">
				<form id="form">
					Nombre: 
					<input type="text" name="nombre" />
					Graduaci贸n:
					<input type="text" name="cuit"/>
					Puntuaci贸n:
					<input type="text" name="fecha"/>
				</form>
			</div>
			<div class="col-xs-2">
				<span onclick="volverHome()" class="btn btn-success col-xs-10">Volver</span>
			</div>
			<div class="col-md-6 col-md-offset-3">
				<button type="button" class="btn btn-info col-xs-6 col-md-3" data-toggle="modal" data-target="#nuevoTragoModal" style="margin-right: 10px">
					Nuevo Trago
				</button>
				<span onclick="filtrar();" class="btn btn-primary col-xs-6 col-md-3">Filtrar</span>
			</div>
		</div>
	</div>
	<div id="tablaTragos" class="col-xs-12"></div>
	<div class="modal fade" id="nuevoTragoModal" tabindex="-1" role="dialog" aria-labelledby="nuevoTragoModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <label class="modal-title" id="exampleModalLabel">Nuevo trago</label>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body" style="font-size: 15px; float: right;">
	     	 <form id="formTrago">
	     	 <div class="col-xs-12 form-group">
				<label class="col-xs-4">Nombre:</label> 
				<input type="text" name="nombre" />
	     	 </div>
	     	 <div class="col-xs-12 form-group">
				<label class="col-xs-4">Vaso recomendado:</label>
				<input type="text" name="vaso" />
	     	 </div>
	     	 <div class="col-xs-12 form-group">
				<label class="col-xs-4">Graduaci贸n:</label>
				<input type="number" name="grad" />
	     	 </div>
	     	 <div class="col-xs-12 form-group">
				<label class="col-xs-4">Puntuaci贸n:</label>
				<input type="number" name="punt" />
	     	 </div>
	     	 <div class="col-xs-12 form-group">
				<label class="col-xs-3">URL imagen:</label>
				<input class="col-xs-9" type="text" name="urlImagen"/>
	     	 </div>
				<input type="hidden" name="idUsuario"/>
			</form>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Crear</button>
	        <button type="button" class="btn btn-primary" onclick="crearTrago();">Crear trago</button>
	      </div>
	    </div>
	  </div>
	</div>
</body>

<script type="text/javascript">
	listar();
	$.validator.messages.required = "Este campo es requerido";
	function listar(){
		$.ajax({
		    type: 'POST',
		    url: "/listar-tragos",
		    success: function (data) {
		       $('#tablaTragos').html(data);
		    }
		});
	}
	function filtrar(){
		$.ajax({
		    type: 'POST',
		    url: "/filtrar-comprobantes/",
			data: $("#form").serialize(),
		    success: function (data) {
		       $('#tablaComprobantes').html(data);
		    }
		});
	}
	
	function crearTrago(){
		if($("#formTrago").valid()){
			
			var form = $("#formTrago").serialize();
			var user = JSON.parse(sessionStorage.getItem("loggedUser"));
			var data = form + user.id;
			$.ajax({
			    type: 'POST',
			    url: "/crear-trago/",
				data: data,
			    success: function (data) {
			    	alert("Trago creado correctamente");
			    	location.reload();
			    }
			});
		}
	}
	function volverHome(){
		window.location = 'http://localhost:8080/inicial';
	}
	
</script>
<style>
	.btn{
		font-size: 17px;
	}
	.error{
		color:red;
	}
</style>
</html>